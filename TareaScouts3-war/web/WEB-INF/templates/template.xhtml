<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>
            <ui:insert name="title">Plantilla Scouts</ui:insert>
        </title>

        <meta name="viewport" content="width=device-width, initial-scale=1"/>

        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="/resources/css/test.css"/>
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script> 


    </h:head>

    <h:body>

        <nav  class="navbar navbar-expand-lg bg-dark navbar-dark">


            <a class="navbar-brand" href="index.xhtml">Scouts</a>


            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>


            <div id="navbarNavDropdown" class="navbar-collapse collapse">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item" id="evt-lnk">
                        <h:form>
                            <h:commandLink rendered="#{!empty controlAutorizacion.usuario}"
                                           action="listaEventos.xhtml" class="nav-link">
                                <span class="glyphicon glyphicon-calendar"></span>
                                Eventos
                            </h:commandLink>
                        </h:form>
                    </li>

                    <li class="nav-item" id="doc-lnk">
                        <h:form>
                            <h:commandLink rendered="#{!empty controlAutorizacion.usuario}" 
                                           role="menuitem" tabindex="-1" 
                                           action="#{accionDocumentos.documentos()}" class="nav-link">

                                Documentacion
                            </h:commandLink>
                        </h:form>
                    </li>

                    <li class="nav-item" id="lst-lnk">
                        <h:link  rendered="#{!empty controlAutorizacion.usuario and controlAutorizacion.esScouter()}" 
                                 role="menuitem" tabindex="-1" 
                                 outcome="listaUsuarios.xhtml" class="nav-link">
                            <span class="glyphicon glyphicon-list"></span>
                            Lista Educandos
                        </h:link>
                    </li>
                </ul>

                <ul class="navbar-nav justify-content-end">
                    <h:form class="form-inline">
                        <c:choose>
                            <c:when test="#{!empty controlAutorizacion.usuario}">

                                <li class="nav-item dropdown">

                                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">
                                        <span class="glyphicon glyphicon-user"></span>
                                        <h:outputText value="#{controlAutorizacion.usuario.alias}" />
                                        <span class="caret"></span>
                                    </a>

                                    <div class="dropdown-menu dropdown-menu-right">

                                        <h:form>

                                            <h:commandLink action="#{edicionUsuario.edit(controlAutorizacion.usuario.alias)}" 
                                                           class="dropdown-item" id="usr-lnk">
                                                <span class="glyphicon glyphicon-user"></span>
                                                Datos personales
                                            </h:commandLink>
                                        </h:form>

                                        <h:form>
                                            <h:commandLink role="menuitem" tabindex="-1" action="#{controlAutorizacion.logout()}"
                                                           class="dropdown-item" id="out-lnk">
                                                <span class="glyphicon glyphicon-log-out"></span>
                                                Salir
                                            </h:commandLink>
                                        </h:form>


                                    </div>

                                </li>    
                            </c:when>
                            <c:otherwise>
                                <li class="nav-item" id="in-lnk">
                                    <h:link role="menuitem" tabindex="-1" 
                                            outcome="index.xhtml" class="nav-link">
                                        <span class="glyphicon glyphicon-log-out"></span>
                                        Login
                                    </h:link>
                                </li>
                            </c:otherwise>
                        </c:choose>
                    </h:form>
                </ul>

            </div>


        </nav>

        <ui:insert name="content">Content</ui:insert>

    </h:body>

</html>

